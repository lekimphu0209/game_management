{% extends "layout.html" %}
{% block title %}Quản trị người chơi{% endblock %}

{% block content %}

<h2 style="text-align: center; margin-bottom: 30px; color: #00bfff;">Trang Quản Trị</h2>

<!-- Khu vực chuyển hướng -->
<div style="display: flex; flex-wrap: wrap; justify-content: center; gap: 15px; margin-bottom: 40px;">
    <a href="{{ url_for('admin_characters') }}" class="admin-btn">Quản lý nhân vật</a>
    <a href="{{ url_for('admin_achievements') }}" class="admin-btn">Quản lý thành tựu</a>
    <a href="{{ url_for('admin_monsters') }}" class="admin-btn">Quản lý quái vật</a>
    <a href="{{ url_for('admin_weapons') }}" class="admin-btn">Hệ thống vũ khí</a>
</div>

<!-- Tìm kiếm người chơi -->
<h2 style="text-align: center; margin-bottom: 20px; color: #00bfff;">Quản lý người chơi</h2>

<form method="POST" style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
    <div>
        <input type="text" name="keyword" placeholder="Tìm theo tên..." value="{{ keyword }}" style="padding: 5px; width: 200px;">
        <input type="submit" value="Tìm kiếm" style="padding: 5px 10px;">
    </div>
</form>

<!-- Bảng người chơi -->
<table>
    <thead>
        <tr>
            <th>Mã người chơi</th>
            <th>Tên</th>
            <th>Email</th>
            <th>Mật khẩu</th>
            <th>Thời gian tạo</th>
            <th>Phiên chơi</th>
            <th>Sửa</th>
            <th>Xóa</th>
        </tr>
    </thead>
    <tbody>
        {% for player in players %}
        <tr class="{{ 'even-row' if loop.index0 % 2 == 0 else 'odd-row' }}">
            <td>{{ player.player_id }}</td>
            <td>{{ player.username }}</td>
            <td>{{ player.email }}</td>
            <td>{{ player.password }}</td>
            <td>{{ player.time_created.strftime('%Y-%m-%d %H:%M:%S') }}</td>
            <td>
                <form action="{{ url_for('admin_view_sessions', pid=player.player_id) }}" method="get">
                    <button type="submit">Xem</button>
                </form>
            </td>
            <td>
                <form action="{{ url_for('edit_player', pid=player.player_id) }}" method="get">
                    <button type="submit" class="btn-edit">Sửa</button>
                </form>
            </td>
            <td>
                <form action="{{ url_for('delete_player', pid=player.player_id) }}" method="post" onsubmit="return confirm('Xóa người chơi này?');">
                    <button type="submit" class="btn-delete">Xóa</button>
                </form>
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>

<!-- Style -->
<style>
    .admin-btn {
        text-align: center;
        padding: 12px 20px;
        background-color: #4CAF50;
        color: white;
        text-decoration: none;
        border-radius: 8px;
        font-size: 16px;
        transition: 0.3s;
    }

    .admin-btn:hover {
        background-color: #45a049;
    }

    .even-row {
        background-color: #ffffff;
    }

    .odd-row {
        background-color: #f7f7f7;
    }

    table {
        width: 100%;
        border-collapse: collapse;
        font-size: 14px;
    }

    th, td {
        border: 1px solid #ccc;
        padding: 8px;
    }

    th {
        background-color: #f2f2f2;
    }

    button {
        padding: 5px 10px;
    }

    .btn-edit {
        background-color: #2196F3;
        color: white;
    }

    .btn-delete {
        background-color: #f44336;
        color: white;
    }

    .btn-link {
        text-decoration: none;
        background-color: #4CAF50;
        color: white;
        padding: 7px 15px;
        border-radius: 4px;
    }
</style>

{% endblock %}
